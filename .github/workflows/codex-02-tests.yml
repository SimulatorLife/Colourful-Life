name: Codex 02 â€“ Improve Test Coverage & Quality
on:
  schedule:
    - cron: "20 */10 * * *" # every 10 hours
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_codex-open-pr-and-ping.yml
    secrets: inherit
    with:
      pr_title: "Codex: Improve Test Coverage & Quality"
      branch_prefix: "codex"
      base_branch: "master"
      prompt: >
        Audit the codebase for test coverage, reliability, and resilience. Identify critical paths, edge cases, and modules with insufficient or missing tests. Add or expand automated tests to ensure both expected and edge-case behavior are validated. Modernize existing tests for readability, speed, and maintainability, and eliminate redundant or flaky tests. Where logic is complex or risky, write focused unit tests; where integration is essential, add end-to-end coverage. The goal is to ensure the codebase is robust, with a strong safety net that prevents regressions and increases confidence in future changes.
